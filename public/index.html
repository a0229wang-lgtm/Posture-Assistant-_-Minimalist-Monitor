<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posture Assistant | Minimalist Monitor</title>
    
    <!-- Utilities and Libraries -->
    <script src="lib/vendors.js"></script>
    <script src="lib/lucide.js"></script>
    <script src="lib/face_mesh.js"></script>
    <script src="lib/camera_utils.js"></script>
    <script src="lib/drawing_utils.js"></script>
    
    <!-- User Styles -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Tailwind CSS (via CDN as backup if vendors.js doesn't cover it fully or if it's acting weird) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        indigo: { 900: '#312E81' },
                        slate: { 900: '#0F172A' }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-[#FBFBFD] text-[#1D1D1F] overflow-hidden">
    <div id="app" class="flex flex-col h-screen p-6 md:p-12">
        <!-- Header -->
        <header class="flex justify-between items-center mb-12">
            <div>
                <h1 class="text-3xl font-semibold tracking-tight">Posture.</h1>
                <p class="text-sm text-gray-500 mt-1">Intelligent Ergonomic Assistant</p>
            </div>
            <div id="status-badge" class="px-4 py-2 rounded-full bg-green-50 text-green-600 text-xs font-medium border border-green-100 flex items-center gap-2">
                <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                System Active
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <!-- Left: Video Preview -->
            <div class="relative rounded-3xl overflow-hidden shadow-2xl bg-black aspect-video group">
                <video id="input_video" class="absolute inset-0 w-full h-full object-cover mirror" playsinline=""></video>
                <canvas id="output_canvas" class="absolute inset-0 w-full h-full object-cover mirror"></canvas>
                
                <div id="camera-loading" class="absolute inset-0 flex flex-col items-center justify-center bg-gray-900 text-white z-10 transition-opacity duration-500">
                    <div class="w-12 h-12 border-4 border-white/20 border-t-white rounded-full animate-spin mb-4"></div>
                    <p class="text-sm font-light">Initializing Camera...</p>
                </div>

                <div class="absolute bottom-6 right-6 z-20">
                    <button id="calibrate-btn" class="bg-white/80 backdrop-blur-md hover:bg-white text-black px-6 py-3 rounded-full text-sm font-medium transition-all transform hover:scale-105 active:scale-95 flex items-center gap-2 shadow-lg">
                        <i data-lucide="crosshair" class="w-5 h-5"></i>
                        Calibrate Baseline
                    </button>
                </div>
            </div>

            <!-- Right: Stats & Feedback -->
            <div class="space-y-8">
                <div class="bg-white p-8 rounded-3xl shadow-sm border border-gray-100">
                    <h2 class="text-xl font-medium mb-6">Real-time Analysis</h2>
                    
                    <div class="space-y-6">
                        <div class="flex items-center justify-between">
                            <span class="text-gray-500 text-sm">Spine Alignment (Y-Pos)</span>
                            <span id="slouch-value" class="font-mono text-sm">0.00</span>
                        </div>
                        <div class="w-full bg-gray-100 h-1.5 rounded-full overflow-hidden">
                            <div id="slouch-bar" class="bg-blue-500 h-full w-0 transition-all duration-300"></div>
                        </div>

                        <div class="flex items-center justify-between">
                            <span class="text-gray-500 text-sm">Neck Rotation (Roll)</span>
                            <span id="tilt-value" class="font-mono text-sm">0Â°</span>
                        </div>
                        <div class="w-full bg-gray-100 h-1.5 rounded-full overflow-hidden">
                            <div id="tilt-bar" class="bg-purple-500 h-full w-0 transition-all duration-300"></div>
                        </div>
                    </div>
                </div>

                <div class="p-6 bg-blue-50 rounded-2xl border border-blue-100">
                    <p class="text-sm text-blue-800 leading-relaxed">
                        <strong class="block mb-1">Instruction:</strong>
                        Sit upright and click "Calibrate Baseline" to set your ideal posture. The system will alert you if bad posture persists for more than 1.5 seconds.
                    </p>
                </div>
            </div>
        </main>

        <!-- Floating Feedback Window -->
        <div id="feedback-window" class="fixed top-8 left-1/2 -translate-x-1/2 px-8 py-4 rounded-full bg-white/90 backdrop-blur-xl shadow-2xl border border-white/20 transform -translate-y-32 transition-transform duration-500 flex items-center gap-4 z-50">
            <div id="feedback-icon" class="p-2 rounded-full">
                <i data-lucide="alert-circle" class="w-5 h-5"></i>
            </div>
            <span id="feedback-text" class="text-sm font-medium">Please adjust your sitting posture</span>
        </div>
    </div>

    <!-- Application Logic -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
